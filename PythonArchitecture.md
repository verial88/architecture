# ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð±ÑÐºÐµÐ½Ð´ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹ Ð½Ð° Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ðµ Python

Python ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð²Ñ‹ÑÐ¾ÐºÐ¾ÑƒÑ€Ð¾Ð²Ð½ÐµÐ²Ñ‹Ð¼ ÑÐ·Ñ‹ÐºÐ¾Ð¼ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ð¸ Ð¿Ð¾Ð½ÑÑ‚Ð½Ð¾Ð¹ ÑÐ¸Ð½Ñ‚Ð°ÐºÑÐ¸Ñ‡ÐµÑÐºÐ¾Ð¹ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¾Ð¹, Ñ‡Ñ‚Ð¾ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ ÑƒÑÐºÐ¾Ñ€ÑÐµÑ‚ Ð¿Ñ€Ð¾Ñ†ÐµÑÑ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¸ Ð¾Ð±Ð»ÐµÐ³Ñ‡Ð°ÐµÑ‚ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÑƒ ÐºÐ¾Ð´Ð°. Ð•Ð³Ð¾ Ñ‡Ð¸Ñ‚Ð°ÐµÐ¼Ð¾ÑÑ‚ÑŒ Ð¸ Ð»Ð°ÐºÐ¾Ð½Ð¸Ñ‡Ð½Ð¾ÑÑ‚ÑŒ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑŽÑ‚ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² Ð±Ñ‹ÑÑ‚Ñ€Ð¾ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¸ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð±ÐµÐ· Ð¿Ð¾Ñ‚ÐµÑ€Ð¸ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð°. Ð­Ñ‚Ð¾ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ Ð²Ð°Ð¶Ð½Ð¾ Ð¿Ñ€Ð¸ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ð¸ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ñ… ÑÐ¸ÑÑ‚ÐµÐ¼, Ð³Ð´Ðµ ÑÑÐ½Ð¾ÑÑ‚ÑŒ Ð¸ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ð¾ÑÑ‚ÑŒ ÐºÐ¾Ð´Ð° Ð¸Ð¼ÐµÑŽÑ‚ Ð¿ÐµÑ€Ð²Ð¾ÑÑ‚ÐµÐ¿ÐµÐ½Ð½Ð¾Ðµ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ.

## Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹

Ð’ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿Ð°ÐºÐµÑ‚Ð½Ñ‹Ñ… Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð¾Ð² Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚ÑÑ Ð´Ð²Ð° Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ñ…:

1. [uv](https://docs.astral.sh/uv/) - Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼Ñ‹Ð¹
2. [poetry](https://python-poetry.org) - ÑÑ‡Ð¸Ð°Ñ‚ÐµÑ‚ÑÑ ÑƒÑÑ‚Ð°Ñ€ÐµÐ²ÑˆÐ¸Ð¼ Ð¸ Ð½Ðµ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ

Ð¡Ñ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ñ‹Ð¹ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€ Ð¿Ð°ÐºÐµÑ‚Ð½Ñ‹Ñ… Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ [pip](https://pip.pypa.io/) Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ Ð² ÑÐ»ÑƒÑ‡Ð°ÑÑ…,
ÐºÐ¾Ð³Ð´Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ñ‚Ð¾Ñ‡ÐµÑ‡Ð½Ñ‹Ð¼, "Ð¾Ð´Ð½Ð¾Ñ€Ð°Ð·Ð¾Ð²Ñ‹Ð¼" Ð¸ Ð½Ðµ Ð¿Ð»Ð°Ð½Ð¸Ñ€ÐµÑ‚ÑÑ Ðº Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸ÑŽ
Ð¿Ð¾ÑÐ»Ðµ Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸.

ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹ Ð´Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð±ÑÐºÐµÐ½Ð´ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² Ð¼Ð¾Ð¶Ð½Ð¾ Ñ€Ð°Ð·Ð´ÐµÐ»Ð¸Ñ‚ÑŒ Ð½Ð° Ð´Ð²Ð°
ÑƒÑÐ»Ð¾Ð²Ð½Ñ‹Ñ… Ñ€Ð°Ð·Ð´ÐµÐ»Ð°: Ð´Ð»Ñ Ð½ÐµÐ¿Ð¾ÑÑ€ÐµÐ´ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð¹ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð´Ð»Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ Ð² Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ.
ÐŸÑ€ÐµÐ¶Ð´Ðµ, Ñ‡ÐµÐ¼ Ð¿Ñ€Ð¸ÑÑ‚ÑƒÐ¿Ð°Ñ‚ÑŒ Ðº Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ñ‚ÑŒÑÑ Ñ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ð¼ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸ÐµÐ¼, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½ Ð½Ð¸Ð¶Ðµ:

1. ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð´Ð»Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¸ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²:
   - [FastAPI](https://fastapi.tiangolo.com)
   - [Pydantic](https://docs.pydantic.dev/latest/)
   - [SqlAlchemy](https://www.sqlalchemy.org)
   - [Alembic](https://alembic.sqlalchemy.org/en/latest/)
   - [Httpx](https://www.python-httpx.org)
   - [Python-Jwt](https://pyjwt.readthedocs.io/en/stable/)
   - [Prefect](https://www.prefect.io)
   - [FastStream](https://faststream.airt.ai/latest)
   - [uvicorn](https://www.uvicorn.org)
   - [apscheduler](https://github.com/agronholm/apscheduler)
   - [uv](https://docs.astral.sh/uv/)
2. Ð’ÑÐ¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ Ð´Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸:
   - [pytest](https://docs.pytest.org/en/stable/)
   - [ruff](https://github.com/astral-sh/ruff)
   - [mypy](https://www.mypy-lang.org)
   - [pre-commit](https://pre-commit.com)
   - [black](https://black.readthedocs.io/en/stable/)
   - [ipykernel](https://ipython.readthedocs.io/en/)

## Ð¢Ð¸Ð¿Ð¾Ð²Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²

ÐÐ¸Ð¶Ðµ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð° Ñ‚Ð¸Ð¿Ð¾Ð²Ð°Ñ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð², Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð´Ð¸Ñ€Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹ Ð¸ Ñ„Ð°Ð¹Ð»Ð¾Ð². Ð’Ñ‹Ñ…Ð¾Ð´ Ð·Ð° Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‹ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð¸Ñ
Ñ‚ÐµÑ…Ð»Ð¸Ð´Ð° Ð¸Ð»Ð¸ Ð»Ð¸Ð´ÐµÑ€Ð° ÐºÐ¾Ð¼Ð¿ÐµÑ‚ÐµÐ½Ñ†Ð¸Ð¹ ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ, Ð° Ñ‚Ð°ÐºÐ¶Ðµ Ð»Ð¸Ð´ÐµÑ€Ð° Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸.

```
ðŸ“ {{ project name }}           // ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
| ðŸ“ .vscode                    // ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ vscode
| |- tasks.json                 // Ð¤Ð°Ð¹Ð» Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼Ð¸ Ð´Ð»Ñ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ñ TaskExprorer
| |- launch.json                // Ð¤Ð°Ð¹Ð» Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°Ð¼Ð¸ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° ÑÐµÑ€Ð²Ð¸ÑÐ° Ñ Ð´ÐµÐ±Ð°Ð³Ð³ÐµÑ€Ð¾Ð¼
| |- settings.json              // Ð¤Ð°Ð¹Ð» ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€Ð° vscode
| ðŸ“ migrations                 // Ð¤Ð°Ð¹Ð» Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÑÐ¼Ð¸ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… alembic
| | ðŸ“ versions
| | | 2024_09_11_comment.py     // Ð¤Ð°Ð¹Ð» Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸ÐµÐ¹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…
| | __init__.py
| | env.py                      // ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¸ Ð½Ð°ÐºÐ°Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹
| | script.py.mako              // Ð¨Ð°Ð±Ð»Ð¾Ð½ Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹
| | utils.py                    // Ð’ÑÐ¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¹
| ðŸ“ {{ service name }}         // ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÑÐµÑ€Ð²Ð¸ÑÐ°, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: portal, users, processing ...
| | ðŸ“ apps
| | | ðŸ“ healthcheck            // ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ healthcheck
| | | | __init__.py             // Ð˜ÑÐ¿Ð¾Ñ€Ñ‚Ñ‹ Ð¼Ð¾Ð´ÑƒÐ»Ñ healthcheck
| | | | router.py               // Ð Ð¾ÑƒÑ‚Ñ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ healthcheck
| | | | schemas.py              // DTO ÑÑ…ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ healthcheck
| | | ðŸ“ users                  // ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
| | | | ðŸ“ repositories         // Ð¡Ð»Ð¾Ð¹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸ÐµÐ² Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ users
| | | | | __init__.py           // Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ñ‹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
| | | | | users.py              // Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
| | | | | company.py            // Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¹
| | | | ðŸ“ services             // Ð¡ÐµÑ€Ð²Ð¸ÑÐ½Ñ‹Ð¹ ÑÐ»Ð¾Ð¹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ users
| | | | | __init__.py           // Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ñ‹ ÑÐµÑ€Ð²Ð¸ÑÐ½Ð¾Ð³Ð¾ ÑÐ»Ð¾Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ users
| | | | | users.py              // Ð¡ÐµÑ€Ð²Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
| | | | | company.py            // Ð¡ÐµÑ€Ð²Ð¸Ñ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¹
| | | | ðŸ“ use_cases            // Ð¡Ð»Ð¾Ð¹ UseCase (UserStory)
| | | | | __init__.py           // Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚Ñ‹ UseCases
| | | | | user_list.py          // ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¸ÑÐºÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
| | | | | create_user.py        // Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
| | | | | update_user.py        // ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
| | | | | delete_user.py        // Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
| | | | ðŸ“ schemas              // Ð¡Ñ…ÐµÐ¼Ñ‹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
| | | | | __init__.py           // Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÑÑ…ÐµÐ¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ users
| | | | | users.py              // Ð¡Ñ…ÐµÐ¼Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
| | | | | company.py            // Ð¡Ñ…ÐµÐ¼Ñ‹ ÐºÐ¾Ð¼Ð¿Ð°Ð½Ð¸Ð¹
| | | | __init__.py
| | | | depends.py              // ÐŸÐ¾ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ IoC ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°
| | | | enums.py                // ÐšÐ¾Ð½ÑÑ‚Ð°Ð½Ñ‚Ñ‹ Ð¿ÐµÑ€ÐµÑ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¹
| | | | models.py               // ÐœÐ¾Ð´ÐµÐ»Ð¸ ÑÑ…ÐµÐ¼Ñ‹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ users
| | | | serializers.py          // ÐŸÑ€Ð°Ð²Ð¸Ð»Ð° Ð¸ Ð¼ÐµÑ…Ð°Ð½Ð¸Ð·Ð¼ ÑÐµÑ€Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¾Ð±ÑŠÐµÐºÑ‚Ð¾Ð²
| | | | router.py               // Ð Ð¾ÑƒÑ‚ÐµÑ€ Ð¸ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€Ñ‹
| | | | exceptions.py           // Ð˜ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ, Ð½Ð°ÑÐ»ÐµÐ´ÑƒÐµÐ¼Ñ‹Ðµ Ð¾Ñ‚ core/exceptions
| | | ðŸ“ other...               // Ð”Ñ€ÑƒÐ³Ð¸Ðµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð² ÑÐµÑ€Ð²Ð¸ÑÐµ
| | ðŸ“ certs                    // Ð¡ÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Ð´Ð»Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
| | | ðŸ“ elasticsearh           // Ð¡ÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Ð´Ð»Ñ elastic search
| | | | ca.pem                  // ÐšÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÑ‚
| | | ðŸ“ kafka                  // Ð¡ÐµÑ€Ð¸Ñ‚Ñ„Ð¸ÐºÐ°Ñ‚Ñ‹ Ð´Ð»Ñ kafka
| | | | ca.pem                  // ÐšÐ¾Ñ€Ð½ÐµÐ²Ð¾Ð¹ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚
| | | | cert.pem                // Ð¡ÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
| | | | key.crt                 // ÐšÐ»ÑŽÑ‡
| | ðŸ“ core                     // Ð¡ÐµÑ€Ð²Ð¸ÑÑ‹ Ð¸ ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ Ð¾Ð±Ñ‰ÐµÐ³Ð¾ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ
| | | ðŸ“ repositories           // Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð¾Ð±Ñ‰ÐµÐ³Ð¾ Ð½Ð°Ð·Ð½Ð°ÐµÑ‡Ð½Ð¸Ñ
| | | | __init__.py             // Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸ÐµÐ² Ð¸ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð¾Ð²
| | | | base_repository.py      // Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ CRUD Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ð‘Ð”
| | | | ðŸ“ cache_repository     // Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
| | | | | __init__.py           // ÐœÐ¾Ð´ÑƒÐ»ÑŒ, ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ð¹ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ¾Ð²
| | | | | inmemory.py           // Ð˜Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ inmemory ÐºÐµÑˆÐ¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ
| | | | | redis.py              // Ð˜Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ Redis
| | | ðŸ“ services               // Ð¡ÐµÑ€Ð²Ð¸ÑÑ‹ Ð¾Ð±Ñ‰ÐµÐ³Ð¾ Ð½Ð°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ñ
| | | | __init__.py             // Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² Ð¸ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð¾Ð²
| | | | transaction.py          // Ð¡ÐµÑ€Ð²Ð¸Ñ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹
| | | __init__.py
| | | db.py                     // ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
| | | depends.py                // ÐŸÐ¾ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ IoC ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°
| | | enums.py                  // Ð¡Ð¿Ð¸ÑÐ¾Ðº Enums
| | | exceptions.py             // ÐÐ°Ð±Ð¾Ñ€ Ð¾Ð±Ñ‰Ð¸Ñ… Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¹
| | | loggers.py                // ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð»Ð¾Ð³Ð³ÐµÑ€Ð°
| | | models.py                 // ÐœÐ¸ÐºÑÐ¸Ð½Ñ‹ Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ ÑÑ…ÐµÐ¼ Ð±Ð°Ð· Ð´Ð°Ð½Ð½Ñ‹Ñ…
| | | schemas.py                // ÐžÐ±Ñ‰Ð¸Ðµ ÑÑ…ÐµÐ¼Ñ‹ (DTO)
| | | use_cases.py              // ÐžÐ±Ñ‰Ð¸Ðµ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ UseCases
| | ðŸ“ tools                    // Cli ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚Ñ‹
| | | ðŸ“ core                   // ÐœÐ¾Ð´ÑƒÐ»ÑŒ Ð¾Ð±Ñ‰Ð¸Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´
| | | | __init__.py             // ÐœÐ¾Ð´ÐµÐ»ÑŒ Ð¾Ð±Ñ‰Ð¸Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´
| | | | cryptography.py         // ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° cryptography
| | | app.py                    // Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° Ð² cli Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
| | | utils.py                  // Ð£Ñ‚Ð¸Ð»Ð¸Ñ‚Ñ‹ cli Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
| | __init__.py
| | bootstrap.py                // Ð¤Ð°Ð¹Ð» ÑÐ±Ð¾Ñ€ÐºÐ¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
| | exceptions.py               // Ð¤Ð°Ð¹Ð» Ñ Ð½Ð°Ð±Ð¾Ñ€Ð¾Ð¼ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² Ð¸ÑÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ð¹
| | main.py                     // Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° Ð² Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
| | middleware.py               // Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÑ€Ð²Ð¸ÑÐ½Ñ‹Ñ… Ð¿Ñ€Ð¾ÑÐ»Ð¾ÐµÐº
| | router.py                   // root Ñ€Ð¾ÑƒÑ‚ÐµÑ€ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
| | settings.py                 // Ð¤Ð°Ð¹Ð» Ñ Ð½Ð°Ð±Ð¾Ñ€Ð¾Ð¼ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ
| | swagger.py                  // Ð¤Ð°Ð¹Ð» Ð´Ð»Ñ Ð´Ð¾Ð¿ Ð½Ð°ÑÑ‚Ñ€Ð¹Ð¾ÐºÐ¸ ÑÐ²Ð°Ð³ÐµÑ€Ð°
| ðŸ“ seed                       // ÐŸÑ€ÐµÑÐµÑ‚Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð´Ð»Ñ Ð·Ð°Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð² Ð¡Ð£Ð‘Ð”
| | 001.users.json              // Ð—Ð°Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
| | 002.groups.json             // Ð“Ñ€ÑƒÐ¿Ð¿Ñ‹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
| ðŸ“ tests                      // Unit Ñ‚ÐµÑÑ‚Ñ‹ ÑÐµÑ€Ð²Ð¸ÑÐ°
| | ðŸ“ apps                     // ÐÐ°Ð±Ð¾Ñ€ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹
| | | ðŸ“ healthcheck            // Ð¢ÐµÑÑ‚Ñ‹ Ð´Ð»Ñ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ healthcheck
| | | | conftest.py             // Ð¤Ð¸ÐºÑÑ‚ÑƒÑ€Ñ‹, Ð¾Ñ‚Ð½Ð¾ÑÑÑ‰Ð¸ÐµÑÑ Ðº Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÑŽ healthcheck
| | | | test_router.py          // Ð¢ÐµÑÑ‚Ñ‹ Ñ€Ð¾ÑƒÑ‚Ð°
| | | | test_repositories.py    // Ð¢ÐµÑÑ‚Ñ‹ ÑÐ»Ð¾Ñ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸ÐµÐ²
| | | | test_services.py        // Ð¢ÐµÑÑ‚Ñ‹ ÑÐµÑ€Ð²Ð¸ÑÐ½Ð¾Ð³Ð¾ ÑÐ»Ð¾Ñ
| | conftest.py                 // Ð¤Ð°Ð¹Ð», ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ð¹ Ñ„Ð¸ÐºÑÑ‚ÑƒÑ€Ñ‹ Ð²ÑÐµÐ³Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
| .dockerignore                 // Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¸ ÑÐ±Ð¾Ñ€ÐºÐµ Ð´Ð¾ÐºÐµÑ€ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²
| .env.example                  // ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° .env
| .gitignore                    // Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ git
| .isort.cfg                    // ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ ÑÐ¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²ÐºÐ¸ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¾Ð²
| .logging.dev.yaml             // ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð»Ð¾Ð³Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¿Ñ€Ð¸ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
| .logging.yaml                 // ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð»Ð¾Ð³Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² Ð¿Ñ€Ð¾Ð´ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ð¸
| .pre-commit-config.yaml       // ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€ÐµÐºÐ¾Ð¼Ð¼Ð¸Ñ‚ Ñ„Ð°Ð¹Ð»Ð¾Ð²
| .python-version               // Ð’ÐµÑ€ÑÐ¸Ñ python, Ð´Ð»Ñ pyenv
| .alembic.ini                  // ÐšÐ¾Ð½Ñ„Ð¸Ð³Ñ†Ñ€Ð°Ñ†Ð¸Ð¾Ð½Ð½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð» Ð´Ð»Ñ alembic
| .docker-compose.yaml          // Ð¤Ð°Ð¹Ð» Ð¸Ð½Ñ„Ñ€Ð°ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹ Ð´Ð»Ñ Ð¸Ð·Ð¾Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾Ð¹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸
| Dockerfile                    // Ð¤Ð°Ð¹Ð» Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ Docker ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°
| entrypoint.sh                 // Docker entrypoint
| Makefile                      // Ð¤Ð°Ð¹Ð» Ð²ÑÐ¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… ÐºÐ¾Ð¼Ð°Ð½Ð´
| manage.py                     // Ð¢Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° Ð´Ð»Ñ cli ÑƒÑ‚Ð¸Ð»Ð¸Ñ‚
| poetry.lock                   // Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼Ñ‹Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¸ Ð¸Ñ… Ð²ÐµÑ€ÑÐ¸Ð¸
| pyproject.toml                // Ð¤Ð°Ð¹Ð» ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°
| pytest.ini                    // ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ unit-Ñ‚ÐµÑÑ‚Ð¾Ð²
| README.md                     // ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð¸ Ð¿Ñ€ÐµÐ´Ð¼ÐµÑ‚Ð½Ð¾Ð¹ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸
```

Ð’ ÑÐ²ÑÐ·Ð¸ Ñ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ð¾Ð¹ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð¾Ð¹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ñ‹Ð²ÐµÑÑ‚Ð¸ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð° Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð², Ð° Ñ‚Ð°ÐºÐ¶Ðµ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ñ… Ð¸Ñ… ÐºÐ»Ð°ÑÑÐ¾Ð² Ð¸ Ð´Ñ€ÑƒÐ³Ð¸Ñ… ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÐµÐ¹

1. Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸

Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð½Ð°Ñ…Ð¾Ð´ÑÑ‚ÑÑ Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ `repositories` Ð¸ Ð¸Ð¼ÐµÑŽÑ‚ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð±ÐµÐ· Ð¿Ñ€ÐµÑ„Ð¸ÐºÑÐ¾Ð², Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€

```
ðŸ“ repositories
| __init__.py
| users.py // Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
```

Ð’Ð½ÑƒÑ‚Ñ€Ð¸ Ñ„Ð°Ð¹Ð»Ð° users.py Ð»ÐµÐ¶Ð¸Ñ‚ Ñ„Ð°Ð¹Ð» Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð°

- `UsersRepositoryProtocol` - Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð° Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
- `UsersRepositoryImpl` - Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
- `UsersFactoryRepositoryProtocol` - Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ñ„Ð°Ð±Ñ€Ð¸ÐºÐ¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹, Ðº Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ñƒ, ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ Ð»ÐµÐ¶Ð°Ñ‚ Ð² Ñ€Ð°Ð·Ð½Ñ‹Ñ… Ð¼ÐµÑÑ‚Ð°Ñ…
- `UsersFactoryRepositoryImpl` - Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ð°Ð±ÑÑ‚Ñ€Ð°ÐºÑ‚Ð½Ð¾Ð¹ Ñ„Ð°Ð±Ñ€Ð¸ÐºÐ¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
  Ð’ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… ÑÐ»ÑƒÑ‡Ð°ÑÑ…, Ð¼Ð¾Ð¶Ð½Ð¾ ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°Ñ‚ÑŒ Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÑŽ Ð±ÐµÐ· Impl, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€:
- `SearchRepositoryProtocol` - Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ð¿Ð¾Ð¸ÑÐºÐ¾Ð³Ð¾Ð²Ð¾ Ð´Ð²Ð¸Ð¶ÐºÐ°
- `ElasticSearchRepository` - Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ ElasticSearch
- `OpenSearchRepository` - Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ OpenSearch

ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ€Ð°Ð·Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ‹ Ñ‚ÑƒÑ‚:

- [FastAPI boilerplate](https://github.com)

## Ð—Ð°Ð¿ÑƒÑÐº Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸

```bash
git clone ...           # ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐµÐ¼ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹
cp .env.example .env    # Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ .env
# Ð•ÑÐ»Ð¸ ÑÐ¾Ð±ÐµÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ registry
poetry config certificates.osc.cert false   # ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð°ÐµÐ¼ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ð²
poetry config http-basic.osc token "$TOKEN" # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ñ‚Ð¾ÐºÐµÐ½ Ð½Ð° source OSC
PYTHONWARNINGS="ignore:Unverified HTTPS request" poetry install --no-root # Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ Ð·Ð°Ð¿Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸

# Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÐ¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ
poetry run uvicorn {{ service name }}.main:app --reload --host 0.0.0.0 --port 8000
```

## ÐŸÑ€Ð¸Ð½Ñ†Ð¸Ð¿Ñ‹ Solid

ÐšÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ Ð°ÑÐ¿ÐµÐºÑ‚Ñ‹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð² Ñ‡Ð¸ÑÑ‚Ð¾Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ðµ:

- **ÐÐ±ÑÑ‚Ñ€Ð°ÐºÑ†Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ…:** Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚, ÐºÐ°ÐºÐ¸Ðµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ñ Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ñ‹ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¿Ð¾ ID, ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ð¸ Ñ‚.Ð´.), Ð±ÐµÐ· ÑƒÐºÐ°Ð·Ð°Ð½Ð¸Ñ, ÐºÐ°Ðº Ð¸Ð¼ÐµÐ½Ð½Ð¾ ÑÑ‚Ð¸ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ñ‹.
- **Ð˜Ð½Ð²ÐµÑ€ÑÐ¸Ñ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹:** Ð’Ð¼ÐµÑÑ‚Ð¾ Ñ‚Ð¾Ð³Ð¾ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²Ñ‹ÑÐ¾ÐºÐ¾ÑƒÑ€Ð¾Ð²Ð½ÐµÐ²Ñ‹Ðµ Ð¼Ð¾Ð´ÑƒÐ»Ð¸ Ð·Ð°Ð²Ð¸ÑÐµÐ»Ð¸ Ð¾Ñ‚ Ð½Ð¸Ð·ÐºÐ¾ÑƒÑ€Ð¾Ð²Ð½ÐµÐ²Ñ‹Ñ… Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¾Ñ‚ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…), Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑŽÑ‚ Ð¼Ð¾Ð´ÑƒÐ»ÑÐ¼ Ð±Ð¸Ð·Ð½ÐµÑ-Ð»Ð¾Ð³Ð¸ÐºÐ¸ Ð·Ð°Ð²Ð¸ÑÐµÑ‚ÑŒ Ð¾Ñ‚ Ð°Ð±ÑÑ‚Ñ€Ð°ÐºÑ†Ð¸Ð¹. Ð­Ñ‚Ð¾ Ð´Ð¾ÑÑ‚Ð¸Ð³Ð°ÐµÑ‚ÑÑ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ð²Ð½ÐµÐ´Ñ€ÐµÐ½Ð¸Ñ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ Ð¸ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ¾Ð².
- **Ð¢ÐµÑÑ‚Ð¸Ñ€ÑƒÐµÐ¼Ð¾ÑÑ‚ÑŒ:** Ð‘Ð»Ð°Ð³Ð¾Ð´Ð°Ñ€Ñ Ð°Ð±ÑÑ‚Ñ€Ð°Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸ÑŽ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð° Ðº Ð´Ð°Ð½Ð½Ñ‹Ð¼, ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ Ð¿Ñ€Ð¾Ñ‰Ðµ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¼Ð¾Ð´ÑƒÐ»ÑŒÐ½Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹ Ð´Ð»Ñ Ð±Ð¸Ð·Ð½ÐµÑ-Ð»Ð¾Ð³Ð¸ÐºÐ¸, Ð·Ð°Ð¼ÐµÐ½ÑÑ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð¼Ð¾Ðº-Ð¾Ð±ÑŠÐµÐºÑ‚Ð°Ð¼Ð¸ Ð¸Ð»Ð¸ Ð·Ð°Ð³Ð»ÑƒÑˆÐºÐ°Ð¼Ð¸.
- **Ð“Ð¸Ð±ÐºÐ¾ÑÑ‚ÑŒ Ð¸ Ñ€Ð°ÑÑˆÐ¸Ñ€ÑÐµÐ¼Ð¾ÑÑ‚ÑŒ:** Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ ÑÐ¿Ð¾ÑÐ¾Ð±Ð° Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð´Ð°Ð½Ð½Ñ‹Ñ… (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´ Ñ Ð¾Ð´Ð½Ð¾Ð¹ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð½Ð° Ð´Ñ€ÑƒÐ³ÑƒÑŽ) Ð½Ðµ Ñ‚Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹ Ð² Ð±Ð¸Ð·Ð½ÐµÑ-Ð»Ð¾Ð³Ð¸ÐºÐµ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ, Ñ‚Ð°Ðº ÐºÐ°Ðº Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚ Ñ‡ÐµÑ€ÐµÐ· ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ.

**SOLID** - Ð°Ð±Ð±Ñ€Ð¸Ð²Ð¸Ð°Ñ‚ÑƒÑ€Ð° Ð½Ð°Ð±Ð¾Ñ€Ð° Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð¾Ð² Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸,

- **S** â€” Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿ ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð¹ Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ (_Single Responsibility Principle_).
  ÐšÐ°Ð¶Ð´Ñ‹Ð¹ ÐºÐ»Ð°ÑÑ Ð¸Ð»Ð¸ Ð¼Ð¾Ð´ÑƒÐ»ÑŒ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¸Ð¼ÐµÑ‚ÑŒ Ð¾Ð´Ð½Ñƒ Ð¸ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð½Ñƒ Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ñƒ Ð´Ð»Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ, Ñ‚Ð¾ ÐµÑÑ‚ÑŒ Ð¾Ñ‚Ð²ÐµÑ‡Ð°Ñ‚ÑŒ Ð·Ð° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ Ð»Ð¸ÑˆÑŒ Ð¾Ð´Ð½Ð¾Ð¹ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‘Ð½Ð½Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ñ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°:

```python
class Report:
    def calculate_statistics(self, data):
        # ÐºÐ¾Ð´ Ð´Ð»Ñ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸
        ...

    def format_report(self, statistics):
        # ÐºÐ¾Ð´ Ð´Ð»Ñ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ð°
        ...

    def print_report(self, formatted_report):
        # ÐºÐ¾Ð´ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ð° Ð½Ð° Ð¿ÐµÑ‡Ð°Ñ‚ÑŒ
        ...
```

Ð—Ð´ÐµÑÑŒ ÐºÐ»Ð°ÑÑ Report Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð·Ð° Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð·Ð°Ð´Ð°Ñ‡: Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸, Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸ Ð¿ÐµÑ‡Ð°Ñ‚ÑŒ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ð°. ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²Ð¸Ð¼ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ ÑÐ½Ð¸Ð¿Ð¿ÐµÑ‚Ð° ÐºÐ¾Ð´Ð°:

```python
class StatisticsCalculator:
    def calculate(self, data):
        # ÐºÐ¾Ð´ Ð´Ð»Ñ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸
        ...

class ReportFormatter:
    def format(self, statistics):
        # ÐºÐ¾Ð´ Ð´Ð»Ñ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ð°
        ...

class ReportPrinter:
    def print(self, formatted_report):
        # ÐºÐ¾Ð´ Ð´Ð»Ñ Ð²Ñ‹Ð²Ð¾Ð´Ð° Ð¾Ñ‚Ñ‡Ñ‘Ñ‚Ð° Ð½Ð° Ð¿ÐµÑ‡Ð°Ñ‚ÑŒ
        ...
```

- **O** â€” Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¾ÑÑ‚Ð¸/Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¾ÑÑ‚Ð¸ (_Open/Closed Principle_).
  ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð½Ñ‹Ðµ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ñ‹ Ð´Ð»Ñ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ñ, Ð½Ð¾ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ñ‹ Ð´Ð»Ñ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°:

```python
class PaymentProcessor:
    def process_payment(self, payment_method, amount):
        if payment_method == 'credit_card':
            # Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð½Ð¾Ð¹ ÐºÐ°Ñ€Ñ‚Ð¾Ð¹
            ...
        elif payment_method == 'paypal':
            # Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ Ñ‡ÐµÑ€ÐµÐ· PayPal
            ...
```

ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²Ð¸Ð¼ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ ÑÐ½Ð¸Ð¿Ð¿ÐµÑ‚Ð° ÐºÐ¾Ð´Ð°:

```python
from abc import ABC, abstractmethod

class PaymentMethod(ABC):
    @abstractmethod
    def pay(self, amount):
        ...

class CreditCardPayment(PaymentMethod):
    def pay(self, amount):
        # Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ ÐºÑ€ÐµÐ´Ð¸Ñ‚Ð½Ð¾Ð¹ ÐºÐ°Ñ€Ñ‚Ð¾Ð¹
        ...

class PayPalPayment(PaymentMethod):
    def pay(self, amount):
        # Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ Ñ‡ÐµÑ€ÐµÐ· PayPal
        ...

class PaymentProcessor:
    def process_payment(self, payment_method: PaymentMethod, amount):
        payment_method.pay(amount)
```

Ð¢ÐµÐ¿ÐµÑ€ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹, Ð´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ ÐºÐ»Ð°ÑÑ, Ñ€ÐµÐ°Ð»Ð¸Ð·ÑƒÑŽÑ‰Ð¸Ð¹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ PaymentMethod, Ð±ÐµÐ· Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÑŽÑ‰ÐµÐ³Ð¾ ÐºÐ¾Ð´Ð°.

- **L** â€” ÐŸÑ€Ð¸Ð½Ñ†Ð¸Ð¿ Ð¿Ð¾Ð´ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ¸ Ð›Ð¸ÑÐºÐ¾Ð² (_Liskov Substitution Principle_).
  ÐžÐ±ÑŠÐµÐºÑ‚Ñ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð·Ð°Ð¼ÐµÐ½ÑÐµÐ¼Ñ‹ ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€Ð°Ð¼Ð¸ Ð¸Ñ… Ð¿Ð¾Ð´Ñ‚Ð¸Ð¿Ð¾Ð² Ð±ÐµÐ· Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ñ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚Ð¸ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°:

```python
class Rectangle:
    def __init__(self, width, height):
        self.width = width
        self.height = height

    def area(self):
        return self.width * self.height

class Square(Rectangle):
    def __init__(self, size):
        super().__init__(size, size)

    def set_width(self, width):
        self.width = width
        self.height = width

    def set_height(self, height):
        self.width = height
        self.height = height
```

Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ ÐºÐ»Ð°ÑÑÐ° Square Ð²Ð¼ÐµÑÑ‚Ð¾ Rectangle Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ñ€Ð¸Ð²ÐµÑÑ‚Ð¸ Ðº Ð½ÐµÐ¾Ð¶Ð¸Ð´Ð°Ð½Ð½Ð¾Ð¼Ñƒ Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸ÑŽ.
ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²Ð¸Ð¼ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ ÑÐ½Ð¸Ð¿Ð¿ÐµÑ‚Ð° ÐºÐ¾Ð´Ð°:

```python
class Shape(ABC):
    @abstractmethod
    def area(self):
        ...

class Rectangle(Shape):
    def __init__(self, width, height):
        self.width = width
        self.height = height

    def area(self):
        return self.width * self.height

class Square(Shape):
    def __init__(self, size):
        self.size = size

    def area(self):
        return self.size * self.size
```

- **I** â€” ÐŸÑ€Ð¸Ð½Ñ†Ð¸Ð¿ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ñ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ° (_Interface Segregation Principle_).
  ÐÐµ ÑÐ»ÐµÐ´ÑƒÐµÑ‚ Ð·Ð°ÑÑ‚Ð°Ð²Ð»ÑÑ‚ÑŒ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² Ð·Ð°Ð²Ð¸ÑÐµÑ‚ÑŒ Ð¾Ñ‚ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ¾Ð², ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð¾Ð½Ð¸ Ð½Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑŽÑ‚.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°:

```python
class MultiFunctionDevice(ABC):
    @abstractmethod
    def print(self, document):
        ...

    @abstractmethod
    def scan(self, document):
        ...

    @abstractmethod
    def fax(self, document):
        ...

class OldPrinter(MultiFunctionDevice):
    def print(self, document):
        # Ð¿ÐµÑ‡Ð°Ñ‚ÑŒ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°
        ...

    def scan(self, document):
        ...  # Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ

    def fax(self, document):
        ...  # Ð½Ðµ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ÑÑ

```

ÐšÐ»Ð°ÑÑ `OldPrinter` Ð²Ñ‹Ð½ÑƒÐ¶Ð´ÐµÐ½ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ñ‹Ð²Ð°Ñ‚ÑŒ Ð¼ÐµÑ‚Ð¾Ð´Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚.
ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²Ð¸Ð¼ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ ÑÐ½Ð¸Ð¿Ð¿ÐµÑ‚Ð° ÐºÐ¾Ð´Ð°:

```python
class Printer(ABC):
    @abstractmethod
    def print(self, document):
        ...

class Scanner(ABC):
    @abstractmethod
    def scan(self, document):
        ...

class Fax(ABC):
    @abstractmethod
    def fax(self, document):
        ...

class OldPrinter(Printer):
    def print(self, document):
        # Ð¿ÐµÑ‡Ð°Ñ‚ÑŒ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°
        ...

class MultiFunctionPrinter(Printer, Scanner, Fax):
    def print(self, document):
        ...

    def scan(self, document):
        ...

    def fax(self, document):
        ...

```

- **D** â€” ÐŸÑ€Ð¸Ð½Ñ†Ð¸Ð¿ Ð¸Ð½Ð²ÐµÑ€ÑÐ¸Ð¸ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ (_Dependency Inversion Principle_).
  ÐœÐ¾Ð´ÑƒÐ»Ð¸ Ð²ÐµÑ€Ñ…Ð½ÐµÐ³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ Ð½Ðµ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð·Ð°Ð²Ð¸ÑÐµÑ‚ÑŒ Ð¾Ñ‚ Ð¼Ð¾Ð´ÑƒÐ»ÐµÐ¹ Ð½Ð¸Ð¶Ð½ÐµÐ³Ð¾ ÑƒÑ€Ð¾Ð²Ð½Ñ; Ð¾Ð±Ð° Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð·Ð°Ð²Ð¸ÑÐµÑ‚ÑŒ Ð¾Ñ‚ Ð°Ð±ÑÑ‚Ñ€Ð°ÐºÑ†Ð¸Ð¹.

ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð½Ð°Ñ€ÑƒÑˆÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð°:

```python
class MySQLDatabase:
    def connect(self):
        # ÐºÐ¾Ð´ Ð´Ð»Ñ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… MySQL
        pass

class DataAccess:
    def __init__(self):
        self.database = MySQLDatabase()

    def get_data(self):
        self.database.connect()
        # Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
```

ÐšÐ»Ð°ÑÑ `DataAccess` Ð·Ð°Ð²Ð¸ÑÐ¸Ñ‚ Ð¾Ñ‚ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ `MySQLDatabase`.
ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²Ð¸Ð¼ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ð¾Ð³Ð¾ ÑÐ½Ð¸Ð¿Ð¿ÐµÑ‚Ð° ÐºÐ¾Ð´Ð°:

```python
class Database(ABC):
    @abstractmethod
    def connect(self):
        ...

class MySQLDatabase(Database):
    def connect(self):
        # ÐºÐ¾Ð´ Ð´Ð»Ñ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… MySQL
        ...

class PostgreSQLDatabase(Database):
    def connect(self):
        # ÐºÐ¾Ð´ Ð´Ð»Ñ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… PostgreSQL
        ...

class DataAccess:
    def __init__(self, database: Database):
        self.database = database

    def get_data(self):
        self.database.connect()
        # Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ…
```

ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ð¾Ð² `SOLID` ÑÐ¿Ð¾ÑÐ¾Ð±ÑÑ‚Ð²ÑƒÐµÑ‚ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸ÑŽ ÑƒÑÑ‚Ð¾Ð¹Ñ‡Ð¸Ð²Ð¾Ð¹, Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€ÑƒÐµÐ¼Ð¾Ð¹ Ð¸ Ð»ÐµÐ³ÐºÐ¾ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÐ¼Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð½Ð¾Ð¹ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹, Ñ‡Ñ‚Ð¾ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ Ð²Ð°Ð¶Ð½Ð¾ Ð² ÑƒÑÐ»Ð¾Ð²Ð¸ÑÑ… Ð´Ð¸Ð½Ð°Ð¼Ð¸Ñ‡Ð½Ð¾ Ð¼ÐµÐ½ÑÑŽÑ‰Ð¸Ñ…ÑÑ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ð¹ Ð¸ Ñ‚ÐµÑ…Ð½Ð¾Ð»Ð¾Ð³Ð¸Ð¹.

## Ð§Ð¸ÑÑ‚Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°

### Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑŒ Ð¾Ñ‚ Ð°Ð±ÑÑ‚Ñ€Ð°ÐºÑ†Ð¸Ð¸, Ð° Ð½Ðµ Ð¾Ñ‚ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸

Ð’ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð° Ñ€Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ð¼ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹. Ð’ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð²Ñ‹ÑÑ‚ÑƒÐ¿Ð°ÐµÑ‚ ÑÑƒÑ‰Ð½Ð¾ÑÑ‚ÑŒ,
ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ¾Ð¼ Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€:

- Ð¡Ð£Ð‘Ð” Postges
- ClickHouse
- Rest
- gRPC
- ...Ð´Ñ€ÑƒÐ³Ð¸Ðµ ÑÐ¿Ð¾ÑÐ¾Ð±Ñ‹ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹Ñ‚ÑÐ²Ð¸Ñ Ñ Ð¸ÑÑ‚Ð¾Ñ‡Ð½Ð¸ÐºÐ°Ð¼Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ….

Ð’ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð° Ñ€Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ð¼ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ ÑÐµÑ€Ð²Ð¸ÑÐ°, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¸Ð· Ð´Ñ€ÑƒÐ³Ð¾Ð³Ð¾ ÑÐµÑ€Ð²Ð¸ÑÐ°:

```python
from contextlib import asynccontextmanager
from typing import AsyncIterator, Protocol, Self

import httpx
from fastapi import Request, Response

from portal.settings import Settings

from ..schemas import UserSchema


class UsersRepositoryProtocol(Protocol):
    """
    ÐŸÑ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ñ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.
    """

    async def get_me(self: Self) -> UserSchema | None:
        """
        ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.
        """
        ...


class UsersRepositoryImpl:
    """
    Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ Ñ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð¼ voiceai-users.
    """

    def __init__(self, settings: Settings, request: Request, response: Response) -> None:
        self.settings = settings
        self.request = request
        self.response = response

    async def get_me(self: Self) -> UserSchema | None:
        """
        ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.
        """
        async with self.use_client() as client:
            response = await client.get(f'{self.settings.users_url}/me', cookies=self.request.cookies)
            if response.is_success:
                return UserSchema.model_validate(response.json())

    @asynccontextmanager
    async def use_client(self: Self) -> AsyncIterator[httpx.AsyncClient]:
        """
        Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ÐºÐ»Ð¸ÐµÐ½Ñ‚.
        """
        http_client = httpx.AsyncClient()
        try:
            yield http_client
        finally:
            await http_client.aclose()
```

ÐšÐ°Ðº Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ð¸Ð¼ÐµÑŽÑ‚ÑÑ Ð´Ð²Ðµ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ñ… ÑÑƒÑ‰Ð½Ð¾ÑÑ‚Ð¸.

1. `UsersRepositoryProtocol` - Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ, Ð½Ð°ÑÐ»ÐµÐ´ÑƒÐµÑ‚ÑÑ Ð¾Ñ‚ `Protocol` - ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð½Ð°Ñ Ñ‚Ð¸Ð¿Ð¸Ð·Ð°Ñ†Ð¸Ñ.
2. `UsersRepositoryImpl` - ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð°Ñ Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ, Ñ€ÐµÐ°Ð»Ð¸Ð·ÑƒÑŽÑ‰Ð°Ñ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» `UsersRepositoryProtocol`.

ÐŸÑ€Ð¸ ÑÑ‚Ð¾Ð¼, Ð¿Ñ€Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸ Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ Ð¼Ñ‹ Ð²ÑÐµÐ³Ð´Ð° Ð¾Ñ‚Ñ‚Ð°Ð»ÐºÐ¸Ð²Ð°ÐµÐ¼ÑÑ Ð¾Ñ‚ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð°, Ð¾Ð¿Ð¸ÑÐ°Ð½Ð½Ð¾Ð³Ð¾ Ð² Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ðµ.

Ð ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸ Ð½Ð°Ñ…Ð¾Ð´ÑÑ‚ÑÑ Ð² Ð¿Ð°Ð¿ÐºÐµ `repository`, ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾, ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‰Ð¸Ð¹ Ñ„Ð°Ð¹Ð» `users.py`, ÐºÐ°Ðº Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¾
Ð²Ñ‹ÑˆÐµ Ð² ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ðµ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°.

```
ðŸ“ repository
| __init__.py
| users.py // Ð¤Ð°Ð¹Ð» Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
```

### ÐÐ±ÑÑ‚Ñ€Ð°ÐºÑ‚Ð½Ð°Ñ Ñ„Ð°Ð±Ñ€Ð¸ÐºÐ°

Ð’ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… ÑÐ»ÑƒÑ‡Ð°ÑÑ… Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ñ‹ Ñ€Ð°Ð·Ð½Ñ‹Ðµ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð° (Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð°/Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ°).
Ð˜ÑÑ…Ð¾Ð´Ñ Ð¸Ð· Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ð¹ Ñ‡Ð¸ÑÑ‚Ð¾Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹, Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ð°Ð±ÑÑ‚Ñ€Ð°ÐºÑ‚Ð½ÑƒÑŽ Ñ„Ð°Ð±Ñ€Ð¸ÐºÑƒ Ð¸ Ð²Ð½ÐµÐ´Ñ€ÑÑ‚ÑŒ ÑƒÐ¶Ðµ ÐµÐµ.
Ð Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ð¼ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ `storage` Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ. ÐšÐµÑˆ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð´Ð²ÑƒÐ¼Ñ Ð¸Ð»Ð¸ Ð±Ð¾Ð»ÐµÐµ ÑÐ¿Ð¾ÑÐ¾Ð±Ð°Ð¼Ð¸.
Ð Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ð¼ Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð° Ð´Ð²Ðµ Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸: Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ðµ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ Ð¸ S3 Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ðµ.
ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ Ð°Ð±ÑÑ‚Ñ€Ð°ÐºÑ‚Ð½Ð¾Ð¹ Ñ„Ð°Ð±Ñ€Ð¸ÐºÐ¸ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½ Ð½Ð¸Ð¶Ðµ:

```python
from pathlib import Path
from typing import Annotated, AsyncContextManager, Protocol, Self, overload

from fastapi import Depends

from portal.core.enums import StorageEnum

from .local_storage import LocalStorage
from .reader import StreamReader as StreamReader
from .reader import StreamReaderProtocol
from .s3_storage import S3Storage
from .schemas import LocalStorageParamsSchema, S3StorageParamsSchema


# ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð°
class StorageRepositoryProtocol(Protocol):
    async def exists(self, name: str | Path) -> bool:
        """
        ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð°.
        """
        ...

    async def listdir(self, name: str | Path) -> list[str]:
        """
        Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð¸ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¹ Ð² Ð·Ð°Ð´Ð°Ð½Ð½Ð¾Ð¹ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸.
        """
        ...

    async def is_file(self, name: str | Path) -> bool:
        """
        Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ True, ÐµÑÐ»Ð¸ Ð¿ÑƒÑ‚ÑŒ ÑÑƒÑ‰ÐµÑÑ‚Ð²ÑƒÐµÑ‚ Ð¸ ÑÑ‚Ð¾ Ñ„Ð°Ð¹Ð».
        """
        ...

# ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»Ð° Ð°Ð±ÑÑ‚Ñ€Ð°ÐºÑ‚Ð½Ð¾Ð¹ Ñ„Ð°Ð±Ñ€Ð¸ÐºÐ¸ Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð²
class StorageFactoryRepositoryProtocol(Protocol):
    @overload
    async def make(self: Self, kind: StorageEnum, params: S3StorageParamsSchema) -> StorageProtocol:
        """Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ S3 Ñ„Ð°Ð¹Ð»Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹."""
        ...

    @overload
    async def make(self: Self, kind: StorageEnum, params: LocalStorageParamsSchema) -> StorageProtocol:
        """Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð°Ð¹Ð»Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹."""
        ...

    async def make(self, kind: StorageEnum, params: StorageParamsSchema) -> StorageProtocol:
        ...

# Ð˜Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ Ñ„Ð°Ð±Ñ€Ð¸ÐºÐ¸
class StorageFactoryRepositoryImpl:
    @overload
    async def make(self: Self, kind: StorageEnum, params: S3StorageParamsSchema) -> StorageProtocol:
        ...

    @overload
    async def make(self: Self, kind: StorageEnum, params: LocalStorageParamsSchema) -> StorageProtocol:
        ...

    async def make(self: Self, kind: StorageEnum, params: StorageParamsSchema) -> StorageProtocol:
        if kind == StorageEnum.S3 and isinstance(params, S3StorageParamsSchema):
            return await self.make_s3_storage(params)
        elif kind == StorageEnum.LOCAL and isinstance(params, LocalStorageParamsSchema):
            return await self.make_local_storage(params)
        raise NotImplementedError

    async def make_s3_storage(self: Self, params: S3StorageParamsSchema) -> StorageProtocol:
        return S3Storage(params)

    async def make_local_storage(self: Self, params: LocalStorageParamsSchema) -> StorageProtocol:
        return LocalStorage(params)
```

Ð Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ð¼ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ñ… Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¹.
ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð° Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½ Ð½Ð¸Ð¶Ðµ:

```python
"""Local Storage."""
from __future__ import annotations

import asyncio
import os
from contextlib import asynccontextmanager
from logging import getLogger
from pathlib import Path
from typing import TYPE_CHECKING, AsyncGenerator, cast

from aiofiles import open
from aiofiles import os as aos

from .schemas import LocalStorageParamsSchema


class LocalStorage:
    def __init__(self, params: LocalStorageParamsSchema):
        self.work_dir = Path(params.path)
        if not os.path.exists(self.work_dir):
            os.makedirs(self.work_dir)
        self.logger = getLogger(__name__)

    async def exists(self, name: str | Path) -> bool:
        path = self.work_dir / name
        return await aos.path.exists(path)

    async def listdir(self, name: str | Path | None = None) -> list[str]:
        path = self.work_dir
        if name:
            path = path / name
        return await aos.listdir(path)

    async def is_file(self, name: str | Path) -> bool:
        path = self.work_dir / name
        return await aos.path.isfile(path)
```

Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ð¸ _S3_ Ñ…Ñ€Ð°Ð½Ð¸Ð»Ð¸Ñ‰Ð° Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð° Ð½Ð¸Ð¶Ðµ. Ð’ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿Ñ€Ð¾Ð²Ð°Ð¹Ð´ÐµÑ€Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ÑÑ
Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ° _miniopy_async_.

```python
"""S3 Storage."""
from __future__ import annotations

import io
from contextlib import asynccontextmanager
from pathlib import Path
from typing import TYPE_CHECKING, AsyncGenerator

import aiohttp
import miniopy_async
from miniopy_async.error import S3Error

from .schemas import S3StorageParamsSchema


class S3Storage:
    def __init__(self, params: S3StorageParamsSchema):
        self.params = params
        self.client = miniopy_async.Minio(
            f'{self.params.endpoint}:{self.params.port}',
            access_key=self.params.access_key,
            secret_key=self.params.secret_key,
            secure=self.params.secure,
        )

    async def listdir(self, name: str | Path) -> list[str]:
        directory: str = str(name) if isinstance(name, Path) else name
        if directory and directory[-1] != '/':
            directory += '/'
        objects = await self.client.list_objects(self.bucket, prefix=directory)
        return [str(obj.object_name) for obj in objects] if objects else []

    async def is_file(self, name: str | Path) -> bool:
        return not await self.is_dir(name)
```

Ð¡ÐµÑ€Ð²Ð¸ÑÑ‹ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÑÑŽÑ‚ÑÑ Ñ‚Ð°ÐºÐ¶Ðµ ÐºÐ°Ðº Ð¸ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸, Ð¾Ð´Ð½Ð°ÐºÐ¾ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½ÑÑŽÑ‚ Ð¸ Ð¸Ð½Ð¶ÐµÐºÑ‚ÑÑ‚ Ð´Ñ€ÑƒÐ³Ð¸Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ð¸ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸.

## UseCase

Ð’ Ñ„Ð°Ð¹Ð»Ðµ `{{ service name }}/core/use_cases.py` Ð»ÐµÐ¶Ð¸Ñ‚ Ð¾Ð±Ñ‰Ð¸Ð¹ Ð´Ð»Ñ ÑÐµÑ€Ð²Ð¸ÑÐ° Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð»,
ÐºÐ¾Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼:

```python
from typing import Protocol, TypeVar

UseCaseResultSchemaType = TypeVar('UseCaseResultSchemaType', covariant=True)


class UseCaseProtocol(Protocol[UseCaseResultSchemaType]):
    """
    ÐŸÑ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ.
    """

    async def __call__(self) -> UseCaseResultSchemaType:
        """
        Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ.
        """
        ...

```

ÐŸÑ€Ð¸ ÑÑ‚Ð¾Ð¼, Ð¿Ñ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ÑŒ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼:

```python
from typing import Protocol, Self

from ..schemas import UserResponseSchema, UserSchema


class MeUseCaseProtocol(Protocol):
    """
    ÐŸÑ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.
    """

    async def get_me(self: Self) -> UserResponseSchema:
        """
        ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.
        """
        ...


class MeUseCaseImpl:
    """
    Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð´Ð»Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ñ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.
    """

    def __init__(self, user: UserSchema) -> None:
        self.user = user

    async def get_me(self: Self) -> UserResponseSchema:
        """
        ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.
        """
        return UserResponseSchema.model_validate(self.user, from_attributes=True)

```

ÐÐ° ÐºÐ°Ð¶Ð´Ñ‹Ð¹ `EndPoint` Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€ÑƒÐµÑ‚ÑÑ Ñ€Ð¾Ð²Ð½Ð¾ ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ `UseCase`.

## API Request Ð¸ Response ÑÑ…ÐµÐ¼Ñ‹

Ð’ÑÐµ API ÑÑ…ÐµÐ¼Ñ‹ Ð´Ð»Ñ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ Ð²Ñ…Ð¾Ð´ÑÑ‰Ð¸Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð¾Ð¿Ð¸ÑÐ°Ð½Ñ‹ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ `Pydantic`
Ð¸ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð±Ñ‹Ñ‚ÑŒ Ð¾Ñ‚Ð½Ð°ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ð½Ñ‹ Ð¾Ñ‚ `RequestSchema`, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ð¾ÐºÐ°Ð·Ð°Ð½Ð° Ð½Ð¸Ð¶Ðµ.
ÐžÐ´Ð½Ð°ÐºÐ¾, Ð¸ÑÑ…Ð¾Ð´ÑÑ‰Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð¿Ñ€Ð¸Ð²Ð¾Ð´Ð¸Ñ‚ÑŒÑÑ Ðº Ð½Ð¾Ñ‚Ð°Ñ†Ð¸Ð¸ `camelCase`, Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°Ñ‚ÑŒÑÑ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ `Pydantic`
Ð¼Ð¾Ð´ÐµÐ»ÐµÐ¹ Ð¸ Ð½Ð°ÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð¾Ñ‚ `ResponseSchema`.

```python
from __future__ import annotations

import uuid
from typing import Generic, Self, TypeVar

from pydantic import AliasGenerator, BaseModel, ConfigDict, field_validator
from pydantic.alias_generators import to_camel

class RequestSchema(BaseModel):
    """
    Ð¡Ñ…ÐµÐ¼Ð° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°.
    """
    # ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð°Ð»Ð¸Ð°ÑÐ¾Ð² Ð¸ Ð²Ð°Ð»Ð¸Ð´Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸Ð· camelCase -> snake_case
    model_config = ConfigDict(
        alias_generator=AliasGenerator(
            validation_alias=to_camel,
        )
    )

class ResponseSchema(BaseModel):
    """
    Ð¡Ñ…ÐµÐ¼Ð° Ð¾Ñ‚Ð²ÐµÑ‚Ð°.
    """

    # ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² camelCase Ð¸Ð· snake_case -> camelCase
    model_config = ConfigDict(
        alias_generator=AliasGenerator(
            serialization_alias=to_camel,
        )
    )

RemoteResponseSchema = RequestSchema
RemoteRequestSchema = ResponseSchema
```

ÐœÐµÐ¶ÑÐµÑ€Ð²Ð¸ÑÐ½Ð¾Ðµ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ð²Ð°Ñ‚ÑŒÑÑ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ ÑÑ‚Ð¸Ñ… Ð¶Ðµ Ñ‚Ñ€Ð°Ð½ÑÑ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ð¹,
Ð² ÑÐ»ÐµÐ´ÑÑ‚Ð²Ð¸Ðµ Ñ‡ÐµÐ³Ð¾ Ð´Ð¾Ð»Ð¶Ð½Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒÑÑ ÐºÐ»Ð°ÑÑÑ‹ `RemoteResponseSchema` Ð¸ `RemoteRequestSchema`.

## Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸

**Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ** â€” ÑÑ‚Ð¾ ÐµÐ´Ð¸Ð½Ð¸Ñ†Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ Ð±Ð°Ð·Ð¾Ð¹ Ð´Ð°Ð½Ð½Ñ‹Ñ…, ÑÐ¾ÑÑ‚Ð¾ÑÑ‰Ð°Ñ Ð¸Ð· Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¸Ð»Ð¸ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ñ… Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹ _SQL_, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ ÐºÐ°Ðº Ð¾Ð´Ð½Ð¾ Ñ†ÐµÐ»Ð¾Ðµ. Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð¾Ð±Ð»Ð°Ð´Ð°ÑŽÑ‚ ÑÐ²Ð¾Ð¹ÑÑ‚Ð²Ð°Ð¼Ð¸, Ð¸Ð·Ð²ÐµÑÑ‚Ð½Ñ‹Ð¼Ð¸ ÐºÐ°Ðº _ACID_:

- **Atomicity (ÐÑ‚Ð¾Ð¼Ð°Ñ€Ð½Ð¾ÑÑ‚ÑŒ):** Ð’ÑÐµ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ Ð¿Ð¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¸Ð»Ð¸ Ð½Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑŽÑ‚ÑÑ Ð²Ð¾Ð²ÑÐµ. Ð•ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚ Ð¾ÑˆÐ¸Ð±ÐºÐ°, Ð²ÑÐµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ð¾Ñ‚ÐºÐ°Ñ‚Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ.
- **Consistency (Ð¡Ð¾Ð³Ð»Ð°ÑÐ¾Ð²Ð°Ð½Ð½Ð¾ÑÑ‚ÑŒ):** Ð¢Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´ÑÑ‚ Ð±Ð°Ð·Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð· Ð¾Ð´Ð½Ð¾Ð³Ð¾ ÑÐ¾Ð³Ð»Ð°ÑÐ¾Ð²Ð°Ð½Ð½Ð¾Ð³Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ð² Ð´Ñ€ÑƒÐ³Ð¾Ðµ, ÑÐ¾Ð±Ð»ÑŽÐ´Ð°Ñ Ð²ÑÐµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ñ†ÐµÐ»Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚Ð¸.
- **Isolation (Ð˜Ð·Ð¾Ð»ÑÑ†Ð¸Ñ):** ÐžÐ´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð½Ðµ Ð²Ð»Ð¸ÑÑŽÑ‚ Ð´Ñ€ÑƒÐ³ Ð½Ð° Ð´Ñ€ÑƒÐ³Ð°, Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ð²Ð°Ñ Ð¸Ð·Ð¾Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð¾ÑÑ‚ÑŒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ.
- **Durability (Ð”Ð¾Ð»Ð³Ð¾Ð²ÐµÑ‡Ð½Ð¾ÑÑ‚ÑŒ):** ÐŸÐ¾ÑÐ»Ðµ Ñ„Ð¸ÐºÑÐ°Ñ†Ð¸Ð¸ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ ÐµÐµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½ÑÑŽÑ‚ÑÑ Ð´Ð°Ð¶Ðµ Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ ÑÐ±Ð¾ÐµÐ² ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹.

Ð¢Ð¸Ð¿Ð¸Ñ‡Ð½Ñ‹Ð¹ ÐºÐ¾Ð´ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ðº Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð½Ð° Ð»ÑŽÐ±Ð¾Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸ÑŽ. Ð’ ÑÐ»ÑƒÑ‡Ð°Ðµ,
ÐµÑÐ»Ð¸ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ ÑÐ²Ð½Ð¾ Ð½Ðµ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ - Ð¾Ð½Ð° Ð²ÑÐµ Ñ€Ð°Ð²Ð½Ð¾ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¾ÑÑ‚ÑÐ¼Ð¸ _SqlAlchemy_.

```python
import uuid
import sqlalchemy as sa
from typing import Protocol, Self

from portal.core.db import SessionManagerProtocol

from ..models import check_list_mark_template


class TodoRepositoryProtocol(Protocol):
    """
    ÐŸÑ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ÑÐ¾ ÑÐ¿Ð¸ÑÐºÐ¾Ð¼ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾ todo Ð»Ð¸ÑÑ‚Ð°.
    """

    async def set_active(self: Self, todo_id: uuid.UUID, status: bool) -> None:
        """
        Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ ÑˆÐ°Ð±Ð»Ð¾Ð½Ñ‹ Ð¾Ñ†ÐµÐ½ÐºÐ¸ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚Ð°.
        """
        ...


class CheckListMarkTemplatesRepositoryImpl:
    """
    Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ÑÐ¾ ÑÐ¿Ð¸ÑÐºÐ¾Ð¼ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð³Ð¾ todo Ð»Ð¸ÑÑ‚Ð°.
    """

    def __init__(self, session_manager: SessionManagerProtocol) -> None:
        self.session_manager = session_manager

    async def set_active(self: Self, todo_id: uuid.UUID, status: bool) -> None:
        """
        Ð£ÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ ÑˆÐ°Ð±Ð»Ð¾Ð½Ñ‹ Ð¾Ñ†ÐµÐ½ÐºÐ¸ Ñ‡ÐµÐº-Ð»Ð¸ÑÑ‚Ð°.
        """
        async with self.session_manager.get_session() as s:
            statement = (
                sa.update(self.model_type)
                .where(self.model_type.id == pk)
                .values({'status': status})
                .returning(self.model_type)
            )
            await s.execute(statement)
        # ÐœÑ‹ Ð²ÑÐµ ÐµÑ‰Ðµ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ð¼ÑÑ Ð² Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸ Ð¸ Ð¾Ð½Ð° Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð°.
```

Ð’ Ð²Ð¸Ð´Ñƒ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾ Ð¼Ñ‹ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ð¼ÑÑ Ð² Ñ‚Ñ€Ð°Ð½Ð·Ð°Ñ†Ð¸Ð¸ Ð² Ð¼Ð¾Ð¼ÐµÐ½Ñ‚, ÐºÐ¾Ð³Ð´Ð° ÑÐµÑÑÐ¸Ñ Ð² _SqlAlchemy_ Ð·Ð°Ð²ÐµÑ€ÑˆÐ°ÐµÑ‚ÑÑ,
Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð½Ð°Ð´ ÑÑ‚Ð°Ð½Ð´Ð°Ñ€Ñ‚Ð½Ð¾Ð¹ ÑÐµÑÑÐ¸Ð¸ Ð¿Ð¸ÑˆÐµÑ‚ÑÑ Ð¾Ð±ÐµÑ€Ñ‚ÐºÐ°, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð² ÑÐ»ÑƒÑ‡Ð°Ðµ, ÐµÑÐ»Ð¸ Ð¼Ñ‹ Ð½Ð°Ñ…Ð¾Ð´Ð¸Ð¼ÑÑ Ð²Ð½ÑƒÑ‚Ñ€Ð¸
Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸, ÑÐ¾Ð·Ð´Ð°ÐµÑ‚ÑÑ Ð²Ð»Ð¾Ð¶ÐµÐ½Ð½Ð°Ñ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ñ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ, Ñ‚.Ðµ.
Ð¿Ð¾ ÑÑƒÑ‚Ð¸ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ `SAVEPOINT` Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸.
ÐšÐ¾Ð´ ÑÐµÑ€Ð²Ð¸ÑÐ° Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½ Ð½Ð¸Ð¶Ðµ:

```python
from contextlib import asynccontextmanager
from typing import AsyncContextManager, AsyncIterator, Protocol, Self

import sqlalchemy as sa
from sqlalchemy.ext.asyncio import AsyncSession


class TransactionServiceProtocol(Protocol):
    """
    ÐŸÑ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» ÑÐµÑ€Ð²Ð¸ÑÐ° Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹.
    """

    def begin(self: Self, immediate: bool = True) -> AsyncContextManager[None]:
        """
        ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸ÑŽ.
        """
        ...


class TransactionServiceImpl:
    """
    Ð ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÐµÑ€Ð²Ð¸ÑÐ° Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹.
    """

    def __init__(self, session: AsyncSession) -> None:
        self.session = session

    @asynccontextmanager
    async def begin(self: Self, immediate: bool = True) -> AsyncIterator[None]:
        """
        ÐÐ°Ñ‡Ð¸Ð½Ð°ÐµÐ¼ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸ÑŽ.
        """
        async with self.session.begin():
            if immediate:
                await self.session.execute(sa.text('SET CONSTRAINTS ALL IMMEDIATE'))
            yield
```

Ð•ÑÐ»Ð¸ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸ÐµÐ² Ð½ÑƒÐ¶Ð½Ð¾ Ð¾Ð±ÑŠÐµÐ´Ð¸Ð½Ð¸Ñ‚ÑŒ Ð² Ð¾Ð´Ð½Ñƒ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸ÑŽ, Ñ‚Ð¾ ÑÑ‚Ð°Ñ€Ñ‚Ð¾Ð²Ð°Ñ‚ÑŒ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸ÑŽ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð²
Ð² ÑÐµÑ€Ð²Ð¸ÑÐµ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¹:

```python


class TodoUseCase(UseCase[ResponseModel]):

    def __init__(
        self,
        transaction_service: TransactionServiceProtocol,
        service1: Service1Protocol,
        service2: Service2Protocol
    ) -> None:
        self.transaction_service = transaction_service
        self.service1 = Service1Protocol
        self.service2 = Service2Protocol

    def __call__(self) -> ResponseModel:
        async with self.transaction_service.begin():
            # Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² service1 Ð¸ service2 Ð¿Ñ€Ð¾Ð¸ÑÑ…Ð¾Ð´Ð¸Ñ‚ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ Ð¾Ð´Ð½Ð¾Ð¹ Ñ‚Ñ€Ð°Ð½Ð·Ð°ÐºÑ†Ð¸Ð¸
            service1.do_smt()
            service2.do_smt()
```

## Depends Ð¸ IoC ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€

**_Inversion of Control (IoC)_** Ð¸ **_Dependency Injection (DI)_** â€” ÑÑ‚Ð¾ Ð²Ð°Ð¶Ð½Ñ‹Ðµ ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ†Ð¸Ð¸ Ð² Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð½Ð¾Ð³Ð¾ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡ÐµÐ½Ð¸Ñ, Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð½Ð° ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ðµ Ð¼Ð¾Ð´ÑƒÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸, Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð½Ð¾Ð³Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ ÐºÐ¾Ð´Ð° Ð¸ Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐµÐ¼Ð¾ÑÑ‚Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¹. _FastAPI_, ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ð²ÐµÐ±-Ñ„Ñ€ÐµÐ¹Ð¼Ð²Ð¾Ñ€Ðº Ð´Ð»Ñ _Python_, Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ ÑÑ‚Ð¸ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ñ‹, Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ°Ð¼ Ð¿Ñ€Ð¾ÑÑ‚Ð¾Ð¹ Ð¸ ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ñ‹Ð¹ ÑÐ¿Ð¾ÑÐ¾Ð± ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑÐ¼Ð¸.

_FastAPI_ Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ð¾ Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ _Dependency Injection_, Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑ Ð¼ÐµÑ…Ð°Ð½Ð¸Ð·Ð¼ Ð´Ð»Ñ Ð´ÐµÐºÐ»Ð°Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ð¾Ð³Ð¾ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Depends.

ÐšÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ _DI_ Ð² _FastAPI_:

- **Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ-Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑŒ:** Ð’Ñ‹ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÐµÑ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÐ¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚ Ð»Ð¾Ð³Ð¸ÐºÑƒ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¸Ð· Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ñ‚Ð¾ÐºÐµÐ½Ð°).
- **Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Depends:** Ð’ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐµ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð° Ð²Ñ‹ ÑƒÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚Ðµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑŒ Ñ‡ÐµÑ€ÐµÐ· Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€ Ñ Ñ‚Ð¸Ð¿Ð¾Ð¼ Depends(Ð²Ð°ÑˆÐ°*Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ*Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÑŒ).
- **FastAPI ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð¶Ð¸Ð·Ð½ÐµÐ½Ð½Ñ‹Ð¼ Ñ†Ð¸ÐºÐ»Ð¾Ð¼ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹:** Ð¤Ñ€ÐµÐ¹Ð¼Ð²Ð¾Ñ€Ðº Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸-Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸, ÐºÐµÑˆÐ¸Ñ€ÑƒÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð¿Ñ€Ð¸ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¸ Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÑ‚ Ð¸Ñ… Ð² Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸Ðº.

Ð’ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ Ñ„Ñ€ÐµÐ¹Ð¼Ð²Ð¾Ñ€ÐºÐ° Ð¿Ð¾ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ð¹ IoC ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ñ‚Ð¾Ð¹ Ñ‡Ð°ÑÑ‚ÑŒÑŽ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸ÐµÐ¼
Ð¼ÐµÐ¶Ð´Ñƒ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð¹ Ð¸Ð¼Ð¿Ð»ÐµÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸ÐµÐ¹ Ñ„Ñ€ÐµÐ¹Ð¼Ð²Ð¾Ñ€ÐºÐ° Ð¸ Ð±Ð¸Ð·Ð½ÐµÑ Ð»Ð¾Ð³Ð¸ÐºÐ¾Ð¹ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ.
Ð”Ð»Ñ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÑÑ‚Ð¾Ð³Ð¾ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð° Ð² ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ð¸ Ñ€Ð°ÑÐ¿Ð¾Ð»Ð°Ð³Ð°ÐµÑ‚ÑÑ Ñ„Ð°Ð¹Ð» `depends.py`.
ÐŸÑ€Ð¸Ð¼ÐµÑ€ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ñ„Ð°Ð¹Ð»Ð° Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½ Ð½Ð¸Ð¶Ðµ:

```python
from fastapi import Depends
from .repositories import TodoRepositoryProtocol, TodoRepositoryImpl
from .services import TodoServiceProtocol, TodoServiceImpl
from .use_cases import TodoUseCaseProtocol, TodoUseCaseImpl

# --- repositories ---

def get_todo_repository(
    session_manager: SessionManager,
) -> TodoRepositoryProtocol:
    return TodoRepositoryImpl(session_manager)

TodoRepository = Annotated[TodoRepositoryProtocol, Depends(get_todo_repository)]

# --- services ---

def get_todo_services(
    todo_repository: TodoRepository,
) -> TodoServiceProtocol:
    return TodoServiceImpl(todo_repository)

TodoService = Annotated[TodoServiceProtocol, Depends(get_todo_services)]

# --- use_cases ---

def get_todo_use_case(
    todo_service: TodoService
) -> TodoUseCaseProtocol:
    return TodoUseCaseImpl(todo_service)
```

## Sync Ð¸ Async Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸

Ð’ ÑÐ¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ… Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸ÑÑ… Ð½Ð° Python, Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ Ð¿Ñ€Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ð¸ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ñ asyncio, Ñ‡Ð°ÑÑ‚Ð¾ Ð²Ð¾Ð·Ð½Ð¸ÐºÐ°ÐµÑ‚ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ðµ (Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÑŽÑ‰Ð¸Ðµ) Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð² Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾Ð¹ ÑÑ€ÐµÐ´Ðµ. Ð§Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ñ‚Ð¾ÐºÐ° Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ, ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ Ð² Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ð¼ Ð¿ÑƒÐ»Ðµ Ð¿Ð¾Ñ‚Ð¾ÐºÐ¾Ð² (_thread pool_) Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð² (_process pool_).

_ThreadPoolExecutor_ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð¸Ñ‚ Ð´Ð»Ñ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð±Ð»Ð¾ÐºÐ¸Ñ€ÑƒÑŽÑ‰Ð¸Ñ… I/O Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹, Ñ‚Ð¾ ÐµÑÑ‚ÑŒ ÐºÐ¾Ð³Ð´Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð¾Ð¶Ð¸Ð´Ð°ÐµÑ‚ Ð²Ð²Ð¾Ð´Ð°-Ð²Ñ‹Ð²Ð¾Ð´Ð°, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€:

- Ð¡ÐµÑ‚ÐµÐ²Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº _API_ Ð±ÐµÐ· Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ñ… Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐº.
- Ð§Ñ‚ÐµÐ½Ð¸Ðµ Ð¸ Ð·Ð°Ð¿Ð¸ÑÑŒ Ñ„Ð°Ð¹Ð»Ð¾Ð² Ð½Ð° Ð´Ð¸ÑÐº.
- ÐžÐ±Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ Ðº Ð±Ð°Ð·Ð°Ð¼ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð±ÐµÐ· Ð¿Ð¾Ð´Ð´ÐµÑ€Ð¶ÐºÐ¸ Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾ÑÑ‚Ð¸.

ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ _ThreadPoolExecutor_ Ð´Ð»Ñ _I/O-bound_ Ð·Ð°Ð´Ð°Ñ‡:

- _GIL (Global Interpreter Lock):_ Ð’ Python Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ñ€ÐµÑ‚Ð°Ñ‚Ð¾Ñ€ CPython Ð¸Ð¼ÐµÐµÑ‚ GIL, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð½Ðµ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¸Ð¼ Ð¿Ð¾Ñ‚Ð¾ÐºÐ°Ð¼ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÑÑ‚ÑŒ Ð±Ð°Ð¹Ñ‚-ÐºÐ¾Ð´ Ð¾Ð´Ð½Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ð¾. ÐžÐ´Ð½Ð°ÐºÐ¾ Ð¿Ñ€Ð¸ I/O Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸ÑÑ… Ð¿Ð¾Ñ‚Ð¾ÐºÐ¸ Ð¾ÑÐ²Ð¾Ð±Ð¾Ð¶Ð´Ð°ÑŽÑ‚ GIL, Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÑ Ð´Ñ€ÑƒÐ³Ð¸Ð¼ Ð¿Ð¾Ñ‚Ð¾ÐºÐ°Ð¼ Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ.
- _ÐÐ¸Ð·ÐºÐ¸Ðµ Ð½Ð°ÐºÐ»Ð°Ð´Ð½Ñ‹Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ñ‹:_ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ Ð¸ Ð¿ÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ð¼ÐµÐ¶Ð´Ñƒ Ð¿Ð¾Ñ‚Ð¾ÐºÐ°Ð¼Ð¸ Ð´ÐµÑˆÐµÐ²Ð»Ðµ, Ñ‡ÐµÐ¼ Ð¼ÐµÐ¶Ð´Ñƒ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ°Ð¼Ð¸.
- _ÐŸÑ€Ð¾ÑÑ‚Ð¾Ñ‚Ð° Ð¾Ð±Ð¼ÐµÐ½Ð° Ð´Ð°Ð½Ð½Ñ‹Ð¼Ð¸:_ ÐŸÐ¾Ñ‚Ð¾ÐºÐ¸ Ñ€Ð°Ð·Ð´ÐµÐ»ÑÑŽÑ‚ Ð¾Ð±Ñ‰ÑƒÑŽ Ð¿Ð°Ð¼ÑÑ‚ÑŒ, Ñ‡Ñ‚Ð¾ ÑƒÐ¿Ñ€Ð¾Ñ‰Ð°ÐµÑ‚ Ð¿ÐµÑ€ÐµÐ´Ð°Ñ‡Ñƒ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¼ÐµÐ¶Ð´Ñƒ Ð½Ð¸Ð¼Ð¸.

Ð’ ÑÐ²ÑÐ·Ð¸ Ñ ÑÑ‚Ð¸Ð¼ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð½Ðµ Ð¾Ð±Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°ÐµÐ¼ Ð² async.
ÐžÐ±Ð¾Ñ€Ð°Ñ‡Ð¸Ð²Ð°Ð½Ð¸Ðµ ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð¹ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÑ‚ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð½Ð°ÐºÐ»Ð°Ð´Ð½Ñ‹Ðµ Ñ€Ð°ÑÑ…Ð¾Ð´Ñ‹ Ð½Ð° Ñ„Ð¾Ñ€Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Future,
ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ð¾ ÑÑƒÑ‚Ð¸ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð¾Ð¶Ð¸Ð´Ð°ÐµÑ‚.

```python
# âœ… correct
def get_todo_repositories() -> TodoRepositoryProtocol:
    return TodoRepositoryImpl()

# âŒ incorrect
async def get_todo_repositories() -> TodoRepositoryProtocol:
    return TodoRepositoryImpl()
```

Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð² Ð°ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ð½Ð¾Ð¹ ÑÑ€ÐµÐ´Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÑŽÑ‚ÑÑ Ð² ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÑ… Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° `run_in_processpool` Ð¸
`run_in_threadpool`:

```python
# run_in_processpool.py

import asyncio
import multiprocessing as mp
from concurrent.futures import ProcessPoolExecutor
from functools import partial
from typing import Callable, TypeVar

from typing_extensions import ParamSpec

P = ParamSpec('P')
R = TypeVar('R')


async def run_in_processpool(fn: Callable[P, R], *args: P.args, **kwargs: P.kwargs) -> R:
    """
    Ð—Ð°Ð¿ÑƒÑÐº Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð² Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ð¾Ð¼ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ.

    Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ fork Ð² ÑÐ²ÑÐ·Ð¸ Ñ https://github.com/python/cpython/issues/94765.
    """
    kwargs_fn = partial(fn, **kwargs)
    loop = asyncio.get_running_loop()
    with ProcessPoolExecutor(mp_context=mp.get_context('fork')) as executor:
        return await loop.run_in_executor(executor, kwargs_fn, *args)
```

```python
# run_in_threadpool.py

import asyncio
from concurrent.futures import ThreadPoolExecutor
from functools import partial
from typing import Callable, TypeVar

from typing_extensions import ParamSpec

R = TypeVar('R')
P = ParamSpec('P')


async def run_in_threadpool(fn: Callable[P, R], *args: P.args, **kwargs: P.kwargs) -> R:
    kwargs_fn = partial(fn, **kwargs)
    with ThreadPoolExecutor() as pool:
        loop = asyncio.get_running_loop()
        return await loop.run_in_executor(pool, kwargs_fn, *args)  # type: ignore
```

## Ð¡Ð»Ð¾Ð¸ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ

Ð•ÑÐ»Ð¸ Ñ€Ð°ÑÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°Ñ‚ÑŒ ÑÐ»Ð¾Ð¸ÑÑ‚Ð¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ, Ñ‚Ð¾ ÐµÐ³Ð¾ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼:

```plantuml
@startuml
component Application {
  component Router {
   component Controller {
     component UseCase {
       component "Service 1" {
         component "Repository 1"
         component "Service 3" {
           component "Repository 3"
         }
         component "Service 2" {
           component "Repository 2"
         }
       }
       component "Service 2" {
         component "Repository 2"
       }
       component "Service 4" {
        component "Repository 4"
       }
     }
   }
  }
}
@enduml
```

![Application Layers](https://www.plantuml.com/plantuml/png/ZSpH2SCW4CRnTwUGRD0a0wHaWvGE8FOU1FL4pq8fxjuIa5n092yAz__uBObKfEoiqEW2Ul0axo5OenKPzF8hf3pAXfaWxaTsNT5JH6jhuUsPO5K9Qk1fU41y6mtoDXpvDDWWO3A4yVFVr4MJc2hHHIQ6bAutNlB6bbV4LRQFzgMPIsrevb3zzgU88XRmh-pi3m00)

Ð Ð¾ÑƒÑ‚ÐµÑ€ Ð¿Ñ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ñ, ÐµÑÐ»Ð¸ Ñ€Ð°ÑÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°Ñ‚ÑŒ Ð² ÐºÐ¾Ð´Ðµ, Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¼ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð¼:

```python
from fastapi import APIRouter

from .depends import MeUseCase
from .schemas import UserResponseSchema

router = APIRouter(prefix='/users', tags=['Users']) # ÐžÐ±Ð¾Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð³Ñ€ÑƒÐ¿Ð¿Ñ‹ Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ð¾Ð²


@router.get('/current')                     # Ð£ÐºÐ°Ð·Ð°Ð½Ð¸Ðµ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ Ñ€Ð¾ÑƒÑ‚ÐµÑ€Ð°
async def current(                          # ÐšÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ð»ÐµÑ€, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¸Ð½Ð¶ÐµÐºÑ‚Ð¸Ñ‚
    me_use_case: MeUseCase                  # Ð˜Ð½Ð¶ÐµÐºÑ†Ð¸Ñ UseCase
) -> UserResponseSchema:                    # Ð¡Ñ…ÐµÐ¼Ð° Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
    """
    ÐŸÐ¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ.
    """
    return await me_use_case.get_me()       # Ð’Ñ‹Ð·Ð¾Ð² ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ð¾Ð³Ð¾ UseCase

```

ÐšÑ€Ð¾Ð¼Ðµ ÑÑ‚Ð¾Ð³Ð¾, Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð·Ð¾Ð½ Ð¾Ð±Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ð¹ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€ÐµÐ´ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¹ Ð´Ð¸Ð°Ð³Ñ€Ð°Ð¼Ð¼Ð¾Ð¹:

```plantuml
@startmindmap
* Application
** Router
*** Controller
**** UseCase
***** Service 1
****** Service 2
******* Repository 3
****** Repository 1
****** Repository 2
***** Serivce 2
****** Repository 3
@endmindmap
```

![Applucation Layers](https://www.plantuml.com/plantuml/png/ROz12i9034NtSugiiskzGAKtK3p0q6OHc4v24WlUtc871jJTVs_nu4yUsMBZkcvP4y9LjV2IWwKcHBZ9CyYEXJ1B3PDIJaHuECtPwGC8TxAT5uBXv2x69euMgJY7s0ikwTSDVzpOwxpts5Thehgs1sy0)

## Ð›Ð¸Ñ‚ÐµÑ€Ð°Ñ‚ÑƒÑ€Ð°

- [Ð›ÑƒÑ‡ÑˆÐ¸Ðµ Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÐ¸ FastAPI](https://github.com/zhanymkanov/fastapi-best-practices)
- [Ð§Ð¸ÑÑ‚Ð°Ñ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°](https://www.litres.ru/book/robert-s-martin/chistaya-arhitektura-iskusstvo-razrabotki-programmnogo-obe-39113892/)
